# Документация File Management Service API

## Доступ к Swagger UI

Swagger UI доступен по адресу: `http://localhost:3004/docs`

## Основные операции

### 1. Управление файлами

#### Загрузка файла
- Endpoint: `POST /files/upload`
- Требуемые заголовки:
  - `x-file-name`: Имя файла
  - `content-type`: MIME тип файла
- Тело запроса: бинарное содержимое файла
- Требует JWT токен

#### Получение содержимого файла
- Endpoint: `GET /files/{id}/content`
- Возвращает бинарное содержимое файла
- Требует JWT токен

### 2. Управление документами

#### Создание документа
- Endpoint: `POST /documents`
- Создает метаданные документа и связывает их с файлом
- Требует JWT токен

#### Получение версий документа
- Endpoint: `GET /documents/{id}/versions`
- Возвращает список всех версий документа
- Требует JWT токен

## Примеры использования

1. **Загрузка файла**:
   ```bash
   curl -X POST http://localhost:3004/files/upload \
     -H "Authorization: Bearer ваш_токен" \
     -H "x-file-name: document.pdf" \
     -H "Content-Type: application/pdf" \
     --data-binary @document.pdf
   ```

2. **Создание документа**:
   - В Swagger UI найдите секцию Documents
   - Используйте POST /documents
   - Заполните необходимые поля в JSON формате

## Особенности работы с файлами

1. **Загрузка файлов через Swagger UI**:
   - Используйте секцию "Request body"
   - Выберите опцию "binary"
   - Загрузите файл через интерфейс
   - Не забудьте указать необходимые заголовки

2. **Работа с версиями**:
   - Каждый документ может иметь несколько версий
   - При обновлении содержимого автоматически создается новая версия
   - Версии нумеруются последовательно

## Коды ответов

- 201: Успешное создание
- 200: Успешное получение данных
- 404: Файл/документ не найден
- 400: Ошибка валидации
- 401: Отсутствует или неверный токен

## Модели данных

### CreateFileDto
```typescript
{
  name: string;        // Имя файла
  type: string;        // MIME тип
  documentType: string; // Тип документа
}
```

### CreateDocumentDto
```typescript
{
  name: string;        // Имя документа
  description?: string; // Описание (опционально)
  type?: string;       // Тип документа (опционально)
}
```

## Замечания по безопасности

- Все эндпоинты требуют валидный JWT токен
- Токен необходимо получить через Auth Service
- Размер загружаемых файлов может быть ограничен настройками сервера