# Документация References Service API

## Доступ к Swagger UI

Swagger UI доступен по адресу: `http://localhost:3006/docs`

## Основные операции

### 1. Управление справочниками

#### Получение всех справочников
- Endpoint: `GET /references`
- Возвращает список всех доступных справочников
- Поддерживает пагинацию

#### Получение справочника по коду
- Endpoint: `GET /references/{code}`
- Возвращает конкретный справочник и его значения

#### Создание справочника
- Endpoint: `POST /references`
- Создает новый справочник
- Требует права администратора

### 2. Управление значениями справочников

#### Добавление значения
- Endpoint: `POST /references/{code}/values`
- Добавляет новое значение в справочник
- Требует права администратора

#### Обновление значения
- Endpoint: `PUT /references/{code}/values/{id}`
- Обновляет существующее значение
- Требует права администратора

## Примеры использования

1. **Создание справочника**:
   ```json
   {
     "code": "document_types",
     "name": "Типы документов",
     "description": "Справочник типов документов в системе"
   }
   ```

2. **Добавление значения**:
   ```json
   {
     "code": "contract",
     "name": "Договор",
     "description": "Договорные документы",
     "isActive": true
   }
   ```

## Поиск и фильтрация

При получении списка справочников доступны параметры:
- `isActive`: Статус активности (true/false)
- `search`: Поиск по названию или коду
- `page`: Номер страницы
- `size`: Количество элементов на странице

## Коды ответов

- 200: Успешное получение данных
- 201: Успешное создание
- 400: Ошибка валидации
- 403: Нет прав доступа
- 404: Справочник не найден

## Модели данных

### ReferenceDto
```typescript
{
  id: string;          // ID справочника
  code: string;        // Уникальный код
  name: string;        // Название
  description: string; // Описание
  isActive: boolean;   // Статус активности
  values: ReferenceValue[]; // Значения справочника
}
```

### ReferenceValueDto
```typescript
{
  id: string;         // ID значения
  code: string;       // Код значения
  name: string;       // Название
  description: string; // Описание
  isActive: boolean;  // Статус активности
  order: number;      // Порядок сортировки
}
```

## Особенности работы

1. **Кеширование**:
   - Данные справочников кешируются
   - При обновлении кеш автоматически инвалидируется

2. **Права доступа**:
   - Чтение доступно всем авторизованным пользователям
   - Создание и редактирование только администраторам

3. **Синхронизация**:
   - Изменения рассылаются через RabbitMQ
   - Другие сервисы автоматически обновляют свои кеши