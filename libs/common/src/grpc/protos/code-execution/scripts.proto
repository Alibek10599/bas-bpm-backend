syntax = "proto3";

package scripts;

service ScriptsService {
  rpc CreateScript (CreateScriptWrapper) returns (ScriptResponse);
  rpc FindAllScripts (FindAllScriptsWrapper) returns (ScriptList);
  rpc FindOneScript (ScriptId) returns (Script);
  rpc UpdateScript (UpdateScriptWrapper) returns (ScriptResponse);
}

enum ProgrammingLanguage {
  NULL = 0;
  JS = 1;
  TS = 2;
  Python = 3;
}

message CreateScript {
  string name = 1;
  string script = 2;
  ProgrammingLanguage language = 3;
}

message UpdateScript {
  string scriptId = 1;
  string name = 2;
  string script = 3;
  ProgrammingLanguage language = 4;
}

message ScriptId {
  string scriptId = 1;
}

message Script {
  string id = 1;
  string name = 2;
  string script = 3;
  ProgrammingLanguage language = 4;
  string createdAt = 5;
  string updatedAt = 6;
}

message ScriptList {
  repeated Script items = 1;
}

message ScriptResponse {
  string message = 1;
  Script script = 2;
}

message CreateScriptWrapper {
  CreateScript body = 1;
  map<string, string> metadata = 2;
}

message FindAllScriptsFilter {
  string name = 1;
}

message FindAllScriptsWrapper {
  FindAllScriptsFilter body = 1;
  map<string, string> metadata = 2;
}

message UpdateScriptWrapper {
  UpdateScript body = 1;
  map<string, string> metadata = 2;
}